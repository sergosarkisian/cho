####################################################################                                                                                                                                                                        
#                           VARIABLES                      #                                                                                                                                                                        
#################################################################### 

##LIMITS
message_size_limit = 50M
smtp_accept_max = 50
smtp_accept_max_per_connection = 100
smtp_accept_max_per_host = 10
smtp_connect_backlog = 50
##LIMITS
                                                                                                                                                                                                                                            
####################################################################                                                                                                                                                                        
#                           MAIN                           #                                                                                                                                                                        
####################################################################                                                                                                                                                                        
                                                                                                                                                                                                                                            
daemon_smtp_ports = 64900                                                                                                                                                                                                        
disable_ipv6 = true
exim_user = mail
exim_group = mail
never_users = root
smtp_enforce_sync = yes
smtp_banner = ESMTP MTA
domainlist local_domains = 127.0.0.1
delay_warning = 2h:2d
queue_run_max = 10
smtp_ratelimit_mail = 2,0.5s,1.05,30s
smtp_ratelimit_rcpt = 4,0.25s,1.015,30s
untrusted_set_sender = *

####################################################################                                                                                                                                                                        
#                       BOUNCE/FROZEN                         #                                                                                                                                                                        
#################################################################### 
ignore_bounce_errors_after = 1m
timeout_frozen_after = 1m
split_spool_directory = true
bounce_return_message = false
bounce_return_body = false
bounce_return_size_limit = 20K

####################################################################                                                                                                                                                                        
#                           ACL                        #                                                                                                                                                                        
#################################################################### 
                                                                                                                                                                                                                                                                                                     
acl_smtp_rcpt = acl_check_rcpt                                                                                                                                                                                                              
                                                                                                                                                                                                           

####################################################################                                                                                                                                                                        
#                           LOGGING                        #                                                                                                                                                                        
#################################################################### 
LOG_FILE_PATH=syslog;
SYSLOG_LONG_LINES=yes
syslog_processname = exim
syslog_facility = local6
syslog_timestamp = false
log_selector = +all -pid            


#####################################################################
#                        BEGIN ACL                              #
#####################################################################


begin acl

###########################
###  acl_check_rcpt     ###
###########################

acl_check_rcpt:
    accept  hosts = :
    control = dkim_disable_verify
    
    deny    message       = Restricted characters in address
        local_parts   = ^[./|] : ^.*[@%!] : ^.*/\\.\\./

accept          

####################################################################                                                                                                                                                                        
#                           ROUTER                                 #                                                                                                                                                                        
#################################################################### 

begin routers


devnull:
  driver = manualroute
  transport = devnull
  route_list =  "*"
  no_more

  
####################################################################                                                                                                                                                                        
#                           TRANSPORTS                             #                                                                                                                                                                        
#################################################################### 

begin transports

devnull:
        driver = appendfile
        file = /dev/null  

