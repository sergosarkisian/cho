####################################################################                                                                                                                                                                        
#                           VARIABLES                      #                                                                                                                                                                        
#################################################################### 

##LIMITS
message_size_limit = 100M
smtp_accept_max = 50
smtp_accept_max_per_connection = 100
smtp_accept_max_per_host = 10
smtp_connect_backlog = 50
##LIMITS
                                                                                                                                                                                                                                            
####################################################################                                                                                                                                                                        
#                           MAIN                           #                                                                                                                                                                        
####################################################################                                                                                                                                                                        
                                                                                                                                                                                                                                            
daemon_smtp_ports = 25                                                                                                                                                                                                         
disable_ipv6 = true
exim_user = mail
exim_group = mail
never_users = root
smtp_enforce_sync = yes
smtp_banner = $smtp_active_hostname ESMTP MTA
domainlist local_domains = 127.0.0.1
delay_warning = 2h:2d
queue_run_max = 10
smtp_ratelimit_mail = 2,0.5s,1.05,30s
smtp_ratelimit_rcpt = 4,0.25s,1.015,30s
untrusted_set_sender = *
tls_advertise_hosts = 

####################################################################                                                                                                                                                                        
#                       BOUNCE/FROZEN                         #                                                                                                                                                                        
#################################################################### 
ignore_bounce_errors_after = 2d
timeout_frozen_after = 7d
split_spool_directory = true
bounce_return_message = true
bounce_return_body = true
bounce_return_size_limit = 20K

####################################################################                                                                                                                                                                        
#                           ACL                        #                                                                                                                                                                        
#################################################################### 
                                                                                                                                                                                                                                                                                                     
acl_smtp_rcpt = acl_check_rcpt                                                                                                                                                                                                              
                                                                                                                                                                                                           

####################################################################                                                                                                                                                                        
#                           LOGGING                        #                                                                                                                                                                        
#################################################################### 
LOG_FILE_PATH=syslog;
SYSLOG_LONG_LINES=yes
syslog_processname = exim
syslog_facility = local6
syslog_timestamp = false
log_selector = +all -pid            


#####################################################################
#                        BEGIN ACL                              #
#####################################################################


begin acl

###########################
###  acl_check_rcpt     ###
###########################

acl_check_rcpt:
    accept  hosts = :
    control = dkim_disable_verify
    
    deny    message       = Restricted characters in address
        local_parts   = ^[./|] : ^.*[@%!] : ^.*/\\.\\./

accept          

####################################################################                                                                                                                                                                        
#                           ROUTER                                 #                                                                                                                                                                        
#################################################################### 

begin routers


smarthost:
  driver = manualroute
  transport = remote_smtp
  route_data = x
  ignore_target_hosts = <; 0.0.0.0 ; 127.0.0.0/8 ; ::1
  no_more

  
####################################################################                                                                                                                                                                        
#                           TRANSPORTS                             #                                                                                                                                                                        
#################################################################### 

begin transports

remote_smtp:
  driver = smtp

remote_smtp_auth:
  driver = smtp
  hosts_require_auth = x
  hosts_try_auth = x
  
  
####################################################################                                                                                                                                                                        
#                          AUTHENTICATORS						   #                                                                                                                                                                        
#################################################################### 

begin authenticators
  
login:
driver = plaintext
public_name = LOGIN
client_send = ": login : password"


####################################################################                                                                                                                                                                        
#                           RETRY                          #                                                                                                                                                                        
#################################################################### 
begin retry

# Address or Domain    Error       Retries
# -----------------    -----       -------

*                      *           F,2h,15m; G,16h,1h,1.5; F,4d,6h

